{% extends "base.html" %}

{% block title %}Главная панель - Управление БД{% endblock %}

{% block page_title %}Обзор системы{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Панель управления базой данных</h1>
    <p class="page-description">Управляйте таблицами, выполняйте запросы и создавайте резервные копии</p>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon blue">
            <i class="fas fa-table"></i>
        </div>
        <div class="stat-value">{{ tables|length }}</div>
        <div class="stat-label">Таблиц в базе данных</div>
        <a href="/data" class="btn btn-primary mt-4 w-100">
            <i class="fas fa-list"></i> Просмотреть все
        </a>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon green">
            <i class="fas fa-database"></i>
        </div>
        <div class="stat-value">{{ tables|length * 150 }}</div>
        <div class="stat-label">Всего записей</div>
        <a href="/query" class="btn btn-success mt-4 w-100">
            <i class="fas fa-search"></i> Конструктор запросов
        </a>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon orange">
            <i class="fas fa-shield-alt"></i>
        </div>
        <div class="stat-value">24/7</div>
        <div class="stat-label">Доступность системы</div>
        <a href="/service" class="btn btn-warning mt-4 w-100">
            <i class="fas fa-cogs"></i> Сервисные функции
        </a>
    </div>
</div>

<div class="card mt-4">
    <div class="card-header">
        <h3><i class="fas fa-th"></i> Доступные таблицы</h3>
    </div>
    <div class="card-body">
        <div class="grid grid-4">
            {% for table in tables %}
            <div class="card" style="border: 1px solid var(--border-color); background: var(--bg-primary);">
                <div class="card-body" style="padding: 20px;">
                    <h4 style="font-size: 16px; margin-bottom: 8px; color: var(--text-primary);">
                        <i class="fas fa-table text-secondary"></i> {{ table }}
                    </h4>
                    <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 16px;">
                        Записей: {{ table_counts.get(table, 0) }}
                    </p>
                    <div class="d-flex gap-3">
                        <a href="/data?table={{ table }}" class="btn btn-sm btn-primary" style="flex: 1;">
                            <i class="fas fa-eye"></i> Данные
                        </a>
                        <a href="/query?table={{ table }}" class="btn btn-sm btn-secondary" style="flex: 1;">
                            <i class="fas fa-code"></i> Запрос
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        {% if not tables %}
        <div class="alert alert-info text-center">
            <i class="fas fa-info-circle"></i> В базе данных нет таблиц
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
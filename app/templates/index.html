{% extends "base.html" %}

{% block title %}Главная панель - Управление БД{% endblock %}

{% block page_title %}Обзор системы{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Панель управления базой данных</h1>
    <p class="page-description">Мониторинг, управление и обслуживание вашей базы данных</p>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon blue">
            <i class="fas fa-table"></i>
        </div>
        <div class="stat-value">{{ tables|length }}</div>
        <div class="stat-label">Таблиц в базе</div>
        <a href="/data" class="btn btn-primary mt-4 w-100">
            <i class="fas fa-list"></i> Просмотр таблиц
        </a>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon green">
            <i class="fas fa-database"></i>
        </div>
        <div class="stat-value">{{ total_records }}</div>
        <div class="stat-label">Всего записей</div>
        <a href="/query" class="btn btn-success mt-4 w-100">
            <i class="fas fa-search"></i> Запросы
        </a>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon orange">
            <i class="fas fa-shield-alt"></i>
        </div>
        <div class="stat-value">24/7</div>
        <div class="stat-label">Доступность</div>
        <a href="/service" class="btn btn-warning mt-4 w-100">
            <i class="fas fa-cogs"></i> Инструменты
        </a>
    </div>
</div>

<div class="card mt-4">
    <div class="card-header">
        <h3><i class="fas fa-th"></i> Доступные таблицы базы данных</h3>
    </div>
    <div class="card-body">
        {% if tables %}
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Таблица</th>
                        <th>Записей</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody>
                    {% for table in tables %}
                    <tr>
                        <td>
                            <div class="d-flex align-center gap-2">
                                <i class="fas fa-table text-secondary"></i>
                                <strong>{{ table }}</strong>
                            </div>
                        </td>
                        <td>
                            <span class="badge" style="background: #e0f2fe; color: #0369a1; padding: 4px 12px; border-radius: 20px;">
                                {{ table_counts.get(table, 0) }}
                            </span>
                        </td>
                        <td>
                            <div class="d-flex gap-2">
                                <a href="/data?table={{ table }}" class="btn btn-sm btn-primary">
                                    <i class="fas fa-eye"></i> Данные
                                </a>
                                <a href="/query?table={{ table }}" class="btn btn-sm btn-secondary">
                                    <i class="fas fa-code"></i> SQL
                                </a>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="empty-state">
            <div style="font-size: 64px; color: var(--text-light); margin-bottom: 20px;">
                <i class="fas fa-database"></i>
            </div>
            <h3 style="margin-bottom: 12px; color: var(--text-primary);">База данных пуста</h3>
            <p style="color: var(--text-secondary); max-width: 400px; margin: 0 auto;">
                В базе данных нет таблиц. Создайте таблицы через SQL конструктор или импортируйте данные.
            </p>
            <div class="mt-4">
                <a href="/query" class="btn btn-primary">
                    <i class="fas fa-code"></i> Перейти к конструктору
                </a>
            </div>
        </div>
        {% endif %}
    </div>
</div>

<style>
.empty-state {
    text-align: center;
    padding: 40px 20px;
}

.badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.table-container {
    overflow-x: auto;
    border-radius: var(--border-radius);
    border: 1px solid var(--border-color);
}
</style>
{% endblock %}